%h1 Listing tasks

%table
  %tr
    %th Tasks
    %th Due date
    %th Priority
    %th Note
    %th 
    %th 
    %th

- @nodes.each do |node| 
  %tr
    - if node.type == 'Task' 
      .task{ data: { 'task-id' => node.id } }
        %td= node.task_name
        %td= node.due_date 
        %td= node.priority 
        %td= node.note 
        - case node.state
        - when 'active'
          - caption = 'pause'
        - when 'paused'
          - caption = 'resume'
        - when 'to_do'
          - caption = 'start'      
        %td= link_to caption.capitalize, '#', class: caption
        %td= link_to 'Show', node 
        %td= link_to 'Edit', edit_task_path(node) 
        %td= link_to 'Destroy', node, method: :delete, data: { confirm: 'Are you sure?' } 
    - else 
      %td= node.project_title 
      %td= link_to 'Edit', edit_project_path(node) if node.type == 'project'
    %br
.hidden-form(style="display:none")    
  = simple_form_for @interruption, url: '#' do |f|
    = f.input_field :name, class: 'name-input' 
    = f.input_field :description, class: 'description-input' 
    = link_to 'Create interruption', '#', class: 'link_create_interruption' 

= link_to 'New Task', new_task_path 
.sidebar(style="display:inline")
  = render 'projects/form' 
