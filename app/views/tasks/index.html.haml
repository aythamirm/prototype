.row-fluid
  %ul#thumbnails
    %li.span3.pull-left.sidebar
      .content
        .divider
        .my-profile
          %img{:src => "/assets/pefil.jpg", :height => "36", :width => "36"} 
          .first-child
            Welcome Victoria!
            %br
            %span
              = link_to('Edit account', edit_user_registration_path)
   
        .divider
        .thumbnail
          %h3 Control panel
          %ul.nav.nav-pill.nav-stacked
            %li.active
              %a{:href=>"#"} 
                %i.icon-inbox  INBOX
            %li.active
              %a{:href=>"#"} 
                %i.icon-inbox  NEXT    
            %li.active
              %a{:href=>"#"} 
                %i.icon-inbox  PROJECT
            %li.active
              %a{:href=>"#"} 
                %i.icon-inbox  WAITING
            %li.active
              %a{:href=>"#"} 
                %i.icon-inbox  SOMEDAY           
          %h3 search panel
          = render 'filter/form'
    %li.span9.pull-right.sidebar
      %h1.page-header Work Desk
      .class.alert.adjusted.alert-info
        %button.close{:type => "button", "data-dismiss" => "alert"} x
        %i.cus-exclamation
        %strong Welcome to Work Desk Please don't forget to check out  all the task and project
      .page-content  
        %table
          %tr
            %th Tasks
            %th Due date
            %th Priority
            %th Note
            %th Estimated time
            %th ShowDescription
            %th 
            %th
            %th 
            %th
        - @nodes.each do |node| 
          %tr
            - if node.type == 'Task' 
              .task{ data: { 'task-id' => node.id } }
                %td= node.task_name
                %td= node.due_date 
                %td= node.priority 
                %td= node.note 
                %td= node.estimated_time 
                - change = "display:none"
                - change2 = "display:block"
                - case node.state
                - when 'active'
                  - caption = 'pause'
                  - change = "display:block" 
                - when 'paused'
                  - caption = 'resume' 
                - when 'to_do'
                  - caption = 'start'  
                - when 'finished'
                  - change2 = "display:none"
                  - caption = 'lala'

                %td= link_to caption.capitalize, '#', class: caption, style: change2
                %td= link_to 'Finish', '#', class: 'finish', style: change 
                %td= link_to 'Show', node 
                %td= link_to 'Edit', edit_task_path(node) 
                %td= link_to 'Destroy', node, method: :delete, data: { confirm: 'Are you sure?' } 
                - if node.type == 'Task'
                  %td= link_to 'ShowDescription', '#', class: 'link-show-description'
                  .hidden-description(style="display:none")= node.note 
            - else 
              %td= node.project_title 
              %td= link_to 'Edit', edit_project_path(node) if node.type == 'project'
            %br
        .hidden-form(style="display:none")    
          = simple_form_for @interruption, url: '#' do |f|
            = f.input_field :name, class: 'name-input' 
            = f.input_field :description, class: 'description-input' 
            = link_to 'Create interruption', '#', class: 'link_create_interruption' 

        - #link_to 'New Task', new_task_path 
        = link_to('New Task', '#NewtaskModal', data: { toggle: 'modal' } )
        .sidebar(style="display:inline")
        %ol.sortable_tree{ data: { max_levels: 5, rebuild_url: rebuild_nodes_url } }
          = sortable_tree @nodes
          = render 'projects/form' 
          = render 'form'


